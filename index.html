<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>AR Scanner with Career Button</title>
  <!-- A-Frame core -->
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <!-- A-Frame Extras (animation-mixer) -->
  <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  <!-- AR.js for marker detection -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    .scan-frame { position: fixed; top:50%; left:50%; transform:translate(-50%, -50%); width:280px; height:280px; border:3px solid rgba(255,255,255,0.8); border-radius:20px; box-shadow:0 0 0 4000px rgba(0,0,0,0.4); display:none; z-index:1000; pointer-events:none; }
    #status { position: fixed; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.7); color:#fff; padding:10px 20px; border-radius:20px; display:none; z-index:1000; }
    /* ‡∏õ‡∏∏‡πà‡∏° unlock ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô */
    #unlock { position: fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,123,255,0.9); color:#fff; padding:15px 30px; border-radius:10px; font-size:1.2em; z-index:1001; border:2px solid #fff; cursor:pointer; }
    /* ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û */
    #career-btn { position: fixed; top:20px; right:20px; padding:10px 15px; background:rgba(0,0,0,0.7); color:#fff; border:none; border-radius:5px; font-size:1em; cursor:pointer; z-index:1002; display:none; }
    /* ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ä‡∏µ‡∏û */
    #career-menu { position: fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,0.85); padding:20px; border-radius:10px; display:none; z-index:1003; color:#fff; }
    #career-menu h3 { margin-top:0; }
    #career-menu button { display:block; width:200px; margin:10px auto; padding:10px; font-size:1em; border:none; border-radius:5px; cursor:pointer; }
  </style>
</head>
<body style="margin:0; overflow:hidden;">
  <div class="scan-frame"></div>
  <div id="status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Hiro Marker...</div>
  <div id="unlock">‡πÅ‡∏ï‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á AR</div>
  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û -->
  <button id="career-btn">‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à</button>

  <!-- ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ä‡∏µ‡∏û -->
  <div id="career-menu">
    <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
    <button data-career="Network Engineer">Network Engineer</button>
    <button data-career="Cloud Engineer">Cloud Engineer</button>
    <button data-career="AI Engineer">AI Engineer</button>
    <button data-career="Data Center">Data Center</button>
    <button id="close-menu">‡∏õ‡∏¥‡∏î</button>
  </div>

  <audio id="voice" src="voice.mp3" preload="metadata"></audio>

  <a-scene id="ar-scene" embedded vr-mode-ui="enabled:false" renderer="logarithmicDepthBuffer:true; colorManagement:false; antialias:false; precision:mediump;" arjs="sourceType:webcam; debugUIEnabled:false; detectionMode:mono_and_matrix; matrixCodeType:3x3; maxDetectionRate:30; cameraParametersUrl:data/camera_para.dat;" style="visibility:hidden;">
    <a-assets timeout="5000">
      <a-asset-item id="animated-model" src="model.glb"></a-asset-item>
    </a-assets>
    
    <!-- Marker container (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πÅ‡∏Å‡∏ô Hiro marker) -->
    <a-marker preset="hiro" id="hiro-marker">
      <a-entity id="marker-container" visible="true">
        <!-- ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏à‡∏≤‡∏Å marker - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ -->
        <a-entity id="model-entity" gltf-model="#animated-model" animation-mixer="clip:*; loop:repeat; timeScale:1" position="0 0 -2.5" scale="0.3 0.3 0.3" rotation="0 0 0" shadow="cast:false; receive:false"></a-entity>
      </a-entity>
    </a-marker>
    
    <!-- Career container (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ä‡∏µ‡∏û) - ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á -->
    <a-entity camera position="0 1.6 0">
      <a-entity id="career-container" position="0 -0.5 -3" visible="false">
        <!-- ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ - ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á (‡∏Ç‡∏¢‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤) -->
        <a-video id="career-video" position="0.4 0.5 -0.1" width="1.5" height="0.84" rotation="0 0 0" shadow="cast:false; receive:false"></a-video>
        <!-- ‡πÇ‡∏°‡πÄ‡∏î‡∏• - ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠) -->
        <a-entity id="career-model" position="-0.3 0.08 0.1" scale="0.2 0.2 0.2" rotation="0 45 0" shadow="cast:false; receive:false"></a-entity>
        <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
        <a-text id="career-status" position="0 -1.2 0" value="Career Content Loading..." align="center" color="white" width="4"></a-text>
      </a-entity>
    </a-entity>
    <a-entity light="type: ambient; intensity:0.4"></a-entity>
    <a-entity light="type: directional; intensity:0.6; castShadow:false" position="-1 1 0"></a-entity>
  </a-scene>

  <script>
    window.onload = () => {
      const unlockBtn = document.getElementById('unlock');
      const scanFrame = document.querySelector('.scan-frame');
      const status = document.getElementById('status');
      const arScene = document.getElementById('ar-scene');
      const marker = document.getElementById('hiro-marker');
      const markerContainer = document.getElementById('marker-container');
      const careerContainer = document.getElementById('career-container');
      const careerModel = document.getElementById('career-model');
      const careerVideo = document.getElementById('career-video');
      const careerStatus = document.getElementById('career-status');
      const voice = document.getElementById('voice');
      const careerBtn = document.getElementById('career-btn');
      const menu = document.getElementById('career-menu');
      const closeBtn = document.getElementById('close-menu');
      let markerFound = false;

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≠‡πÉ‡∏´‡πâ A-Frame entity ‡∏û‡∏£‡πâ‡∏≠‡∏°
      function waitForEntity(entity) {
        return new Promise((resolve) => {
          if (entity.hasLoaded) {
            resolve(entity);
          } else {
            entity.addEventListener('loaded', () => resolve(entity), { once: true });
            // Timeout ‡πÄ‡∏ú‡∏∑‡πà‡∏≠
            setTimeout(() => resolve(entity), 2000);
          }
        });
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î asset ‡πÅ‡∏ö‡∏ö dynamic (‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ cache)
      function loadAssetDynamic(assetId, src) {
        const assets = document.querySelector('a-assets');
        
        // ‡∏•‡∏ö asset ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ (‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á A-Frame cache)
        let oldAsset = document.getElementById(assetId);
        if (oldAsset) {
          // ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö
          if (oldAsset.tagName === 'VIDEO') {
            oldAsset.pause();
            oldAsset.removeAttribute('src');
            oldAsset.load(); // ‡∏•‡πâ‡∏≤‡∏á buffer
          }
          oldAsset.remove();
          console.log('‡∏•‡∏ö asset ‡πÄ‡∏Å‡πà‡∏≤:', assetId);
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á asset ‡πÉ‡∏´‡∏°‡πà‡πÇ‡∏î‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° timestamp ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô cache
        const timestamp = Date.now();
        const uniqueId = `${assetId}_${timestamp}`;
        
        let asset;
        if (src.endsWith('.glb')) {
          asset = document.createElement('a-asset-item');
          asset.setAttribute('id', uniqueId);
          asset.setAttribute('src', `${src}?t=${timestamp}`);
        } else if (src.endsWith('.mp4')) {
          asset = document.createElement('video');
          asset.setAttribute('id', uniqueId);
          asset.setAttribute('src', `${src}?t=${timestamp}`);
          asset.setAttribute('preload', 'metadata'); // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô metadata ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ò
          asset.setAttribute('loop', '');
          asset.setAttribute('muted', '');
          asset.setAttribute('playsinline', '');
          asset.setAttribute('crossorigin', 'anonymous');
          // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á load ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£
        }
        
        if (asset) {
          assets.appendChild(asset);
          console.log('‡∏™‡∏£‡πâ‡∏≤‡∏á asset ‡πÉ‡∏´‡∏°‡πà:', uniqueId, 'src:', src);
          
          // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
          return new Promise((resolve) => {
            if (asset.tagName === 'VIDEO') {
              asset.addEventListener('loadeddata', () => {
                console.log('‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à:', uniqueId);
                resolve(`#${uniqueId}`);
              }, { once: true });
              asset.addEventListener('error', () => {
                console.error('‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', src);
                resolve(`#${uniqueId}`);
              }, { once: true });
            } else {
              asset.addEventListener('loaded', () => {
                console.log('‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à:', uniqueId);
                resolve(`#${uniqueId}`);
              }, { once: true });
              asset.addEventListener('error', () => {
                console.error('‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', src);
                resolve(`#${uniqueId}`);
              }, { once: true });
            }
            
            // Timeout ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
            setTimeout(() => resolve(`#${uniqueId}`), 5000);
          });
        }
        
        return Promise.resolve(`#${assetId}`);
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
      function stopAllMedia() {
        // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        voice.pause();
        voice.currentTime = 0;
        
        // ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏à‡∏≤‡∏Å career
        const careerVideoEl = document.querySelector('#career-video');
        if (careerVideoEl && careerVideoEl.components && careerVideoEl.components.material && careerVideoEl.components.material.material.map) {
          careerVideoEl.components.material.material.map.image.pause();
        }
        
        console.log('‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß');
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏ä‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
      function clearTemporaryCache() {
        console.log('üßπ ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏ä‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß...');
        
        // ‡∏•‡πâ‡∏≤‡∏á A-Frame cache ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
        if (AFRAME.utils && AFRAME.utils.srcLoader && AFRAME.utils.srcLoader.cache) {
          const cacheKeys = Object.keys(AFRAME.utils.srcLoader.cache);
          let deletedCount = 0;
          
          cacheKeys.forEach(key => {
            // ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ cache ‡∏Ç‡∏≠‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞ career ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            if (!key.includes('model.glb') && !key.includes('career-model-asset') && !key.includes('career-video-asset')) {
              delete AFRAME.utils.srcLoader.cache[key];
              deletedCount++;
            }
          });
          
          console.log(`‡∏•‡∏ö‡πÅ‡∏Ñ‡∏ä ${deletedCount} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`);
        }
        
        // ‡∏•‡πâ‡∏≤‡∏á texture cache ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
        if (AFRAME.utils.material && AFRAME.utils.material.textureCache) {
          const textureKeys = Object.keys(AFRAME.utils.material.textureCache);
          let deletedTextures = 0;
          
          textureKeys.forEach(key => {
            if (!key.includes('model.glb') && !key.includes('career-model-asset') && !key.includes('career-video-asset')) {
              delete AFRAME.utils.material.textureCache[key];
              deletedTextures++;
            }
          });
          
          console.log(`‡∏•‡∏ö texture cache ${deletedTextures} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`);
        }
        
        // ‡∏•‡πâ‡∏≤‡∏á DOM assets ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
        const assets = document.querySelector('a-assets');
        const oldAssets = assets.querySelectorAll('[id*="_"]:not([id*="career-model-asset_"]):not([id*="career-video-asset_"])');
        oldAssets.forEach(asset => {
          if (asset.id !== 'animated-model') {
            asset.remove();
            console.log('‡∏•‡∏ö DOM asset ‡πÄ‡∏Å‡πà‡∏≤:', asset.id);
          }
        });
        
        console.log('‚úÖ ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏ä‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß');
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πà‡∏≤
      function clearOldAssets() {
        console.log('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πà‡∏≤...');
        
        // ‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô
        stopAllMedia();
        
        // ‡∏ã‡πà‡∏≠‡∏ô marker container
        markerContainer.setAttribute('visible', 'false');
        
        // ‡∏•‡∏ö attributes ‡∏à‡∏≤‡∏Å career entities
        careerModel.removeAttribute('gltf-model');
        careerModel.removeAttribute('animation-mixer');
        careerVideo.removeAttribute('src');
        careerVideo.removeAttribute('material');
        
        // ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏ô A-Frame
        const currentVideoAssets = document.querySelectorAll('[id^="career-video-asset"]');
        currentVideoAssets.forEach(videoAsset => {
          if (videoAsset) {
            videoAsset.pause();
            videoAsset.currentTime = 0;
            // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ A-Frame ‡∏•‡πâ‡∏≤‡∏á texture cache
            if (careerVideo.components.material && careerVideo.components.material.material) {
              careerVideo.components.material.material.map = null;
              careerVideo.components.material.material.needsUpdate = true;
            }
          }
        });
        
        // ‡∏•‡∏ö career assets ‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å DOM
        const assets = document.querySelector('a-assets');
        const oldAssets = assets.querySelectorAll('[id^="career-"]');
        oldAssets.forEach(asset => {
          console.log('‡∏•‡∏ö asset:', asset.id);
          asset.remove();
        });
        
        // Clear A-Frame cache
        if (AFRAME.utils && AFRAME.utils.srcLoader && AFRAME.utils.srcLoader.cache) {
          Object.keys(AFRAME.utils.srcLoader.cache).forEach(key => {
            if (key.includes('career-')) {
              delete AFRAME.utils.srcLoader.cache[key];
              console.log('‡∏•‡∏ö cache:', key);
            }
          });
        }
        
        // Clear texture cache
        if (AFRAME.utils.material && AFRAME.utils.material.textureCache) {
          Object.keys(AFRAME.utils.material.textureCache).forEach(key => {
            if (key.includes('career-')) {
              delete AFRAME.utils.material.textureCache[key];
            }
          });
        }
        
        console.log('‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß');
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏≤‡∏ä‡∏µ‡∏û - ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏à‡∏£‡∏¥‡∏á‡πÜ
      function changeCareer(careerName) {
        console.log('üë§ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ä‡∏µ‡∏û:', careerName);
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£
        status.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° ${careerName}...`;
        status.style.background = 'rgba(255,165,0,0.7)';
        status.style.display = 'block';
        scanFrame.style.display = 'none';
        
        // ‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô
        clearOldAssets();
        
        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà
        setTimeout(async () => {
          console.log('üì• ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏ä‡∏µ‡∏û:', careerName);
          
          // ‡πÅ‡∏™‡∏î‡∏á career container ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô marker container
          careerContainer.setAttribute('visible', 'true');
          markerContainer.setAttribute('visible', 'false');
          careerStatus.setAttribute('value', `Loading ${careerName}...`);
          
          // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)
          let modelSrc, videoSrc, audioSrc;
          
          switch(careerName) {
            case 'Network Engineer':
              modelSrc = 'network-model.glb';
              videoSrc = 'video-network.mp4';
              audioSrc = 'voice-network.mp3';
              break;
            case 'Cloud Engineer':
              modelSrc = 'cloud-model.glb';
              videoSrc = 'video-cloud.mp4';
              audioSrc = 'voice-cloud.mp3';
              break;
            case 'AI Engineer':
              modelSrc = 'ai-model.glb';
              videoSrc = 'video-ai.mp4';
              audioSrc = 'voice-ai.mp3';
              break;
            case 'Data Center':
              modelSrc = 'dc-model.glb';
              videoSrc = 'video-dc.mp4';
              audioSrc = 'voice-dc.mp3';
              break;
            default:
              modelSrc = 'model.glb';
              videoSrc = 'video-network.mp4'; // ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏ó‡∏ô
              audioSrc = 'voice.mp3';
          }
          
          console.log('üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î:', { modelSrc, videoSrc, audioSrc });
          
          try {
            // ‡πÇ‡∏´‡∏•‡∏î assets ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á
            console.log('‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î assets ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö', careerName, '...');
            status.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${careerName}...`;
            
            const modelRef = await loadAssetDynamic('career-model-asset', modelSrc);
            const videoRef = await loadAssetDynamic('career-video-asset', videoSrc);
            
            console.log('‚úÖ ‡πÇ‡∏´‡∏•‡∏î assets ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö', careerName, ':', { modelRef, videoRef });
            status.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ${careerName}...`;
            
            // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÉ‡∏´‡πâ A-Frame ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
            setTimeout(async () => {
              // ‡∏£‡∏≠‡πÉ‡∏´‡πâ entities ‡∏û‡∏£‡πâ‡∏≠‡∏°
              await waitForEntity(careerModel);
              await waitForEntity(careerVideo);
              
              // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÉ‡∏´‡∏°‡πà (‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤) - ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
              console.log('‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏°‡πÄ‡∏î‡∏•...', modelRef);
              careerModel.setAttribute('gltf-model', modelRef);
              careerModel.setAttribute('animation-mixer', 'clip:*; loop:repeat; timeScale:1'); // ‡∏õ‡∏£‡∏±‡∏ö animation
              careerModel.setAttribute('visible', 'true');
              careerModel.setAttribute('shadow', 'cast:false; receive:false'); // ‡∏õ‡∏¥‡∏î shadow ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
              
              // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å‡∏≠‡∏±‡∏ô‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô Cloud)
              let modelScale;
              if (careerName === 'Cloud Engineer') {
                modelScale = '0.2 0.2 0.2'; // ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Cloud
                console.log('‡πÉ‡∏ä‡πâ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Cloud Engineer');
              } else {
                modelScale = '0.3 0.3 0.3'; // ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏≠‡∏∑‡πà‡∏ô
                console.log('‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:', careerName);
              }
              
              careerModel.setAttribute('scale', modelScale); 
              careerModel.setAttribute('position', '-0.3 0.08 0.1'); // ‡∏ã‡πâ‡∏≤‡∏¢ ‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤
              careerModel.setAttribute('rotation', '0 45 0'); // ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏°‡∏∏‡∏°
              
              // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡∏°‡πà (‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á)
              console.log('‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠...', videoRef);
              
              // ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏Å‡πà‡∏≤
              careerVideo.removeAttribute('material');
              careerVideo.removeAttribute('src');
              careerVideo.removeAttribute('text');
              
              // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÉ‡∏´‡πâ A-Frame ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏ö
              setTimeout(() => {
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - ‡∏õ‡∏£‡∏±‡∏ö‡∏•‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
                careerVideo.setAttribute('material', `src: ${videoRef}; side: double; transparent: false; shader: flat`);
                careerVideo.setAttribute('visible', 'true');
                careerVideo.setAttribute('width', '1.5'); 
                careerVideo.setAttribute('height', '0.84'); 
                careerVideo.setAttribute('position', '0.4 0.5 -0.1');
                careerVideo.setAttribute('rotation', '0 0 0');
                careerVideo.setAttribute('shadow', 'cast:false; receive:false'); // ‡∏õ‡∏¥‡∏î shadow
                
                // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ A-Frame ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
                careerVideo.flushToDOM();
                console.log('‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à');
              }, 100);
              
              // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
              const videoAssets = document.querySelectorAll('[id^="career-video-asset"]');
              const videoAsset = videoAssets[videoAssets.length - 1]; // ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
              if (videoAsset) {
                console.log('Video asset ‡∏û‡∏ö:', videoAsset.src);
                console.log('Video ready state:', videoAsset.readyState);
                // ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
                if (videoAsset.readyState < 2) {
                  videoAsset.load();
                }
              } else {
                console.error('‡πÑ‡∏°‡πà‡∏û‡∏ö video asset');
              }
              
              // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• debug
              console.log('Career Model Position:', careerModel.getAttribute('position'));
              console.log('Career Video Position:', careerVideo.getAttribute('position'));
              console.log('Career Container Visible:', careerContainer.getAttribute('visible'));
              console.log('Career Container Position:', careerContainer.getAttribute('position'));
              
              // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ A-Frame ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï
              careerModel.flushToDOM();
              careerVideo.flushToDOM();
              
              // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà
              voice.src = audioSrc;
              
              console.log('‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à, ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏∑‡πà‡∏≠...');
              
              // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà
              setTimeout(() => {
                // ‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á)
                const videoElements = document.querySelectorAll('[id^="career-video-asset"]');
                const videoElement = videoElements[videoElements.length - 1]; // ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                
                if (videoElement) {
                  console.log('=== ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î ===');
                  console.log('Career Name:', careerName);
                  console.log('Video File:', videoSrc);
                  console.log('Video Element src:', videoElement.src);
                  console.log('Video ID:', videoElement.id);
                  console.log('Video readyState:', videoElement.readyState);
                  
                  // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
                  videoElement.pause();
                  videoElement.currentTime = 0;
                  videoElement.muted = true; 
                  videoElement.loop = true;
                  
                  // Force load only when needed
                  if (videoElement.readyState < 2) {
                    videoElement.load();
                  }
                  
                  // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
                  const playVideo = () => {
                    videoElement.play().then(() => {
                      console.log('‚úÖ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', careerName, '- ‡πÑ‡∏ü‡∏•‡πå:', videoSrc);
                      
                      // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï A-Frame material ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö timestamp ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô cache
                      const timestamp = Date.now();
                      careerVideo.setAttribute('material', `src: ${videoRef}; side: double; transparent: false; shader: flat`);
                      
                      // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ A-Frame ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà
                      if (careerVideo.components.material) {
                        careerVideo.components.material.material.needsUpdate = true;
                        if (careerVideo.components.material.material.map) {
                          careerVideo.components.material.material.map.needsUpdate = true;
                        }
                      }
                      
                    }).catch(e => {
                      console.warn('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏î‡πâ:', e);
                      // ‡πÅ‡∏™‡∏î‡∏á placeholder ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
                      careerVideo.setAttribute('material', `color: #FF4444; transparent: false`);
                      careerVideo.setAttribute('text', `value: ${careerName}\nVIDEO ERROR; color: white; align: center; width: 8`);
                    });
                  };
                  
                  // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°
                  if (videoElement.readyState >= 2) {
                    playVideo();
                  } else {
                    videoElement.addEventListener('loadeddata', playVideo, { once: true });
                    // Timeout backup
                    setTimeout(playVideo, 2000);
                  }
                  
                } else {
                  console.error('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö video element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:', careerName);
                  // ‡πÅ‡∏™‡∏î‡∏á placeholder ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
                  careerVideo.setAttribute('material', `color: #44FF44; transparent: false`);
                  careerVideo.setAttribute('text', `value: ${careerName}\nNO VIDEO FOUND; color: black; align: center; width: 8`);
                }
                
                // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
                voice.currentTime = 0;
                voice.play().catch(e => console.warn('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ:', e));
                console.log(`üéµ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ${audioSrc}`);
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
                status.textContent = `‡πÅ‡∏™‡∏î‡∏á: ${careerName} ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß`;
                status.style.background = 'rgba(0,255,0,0.7)';
                careerStatus.setAttribute('value', `${careerName} Ready!`);
                
                // ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏ä‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à
                setTimeout(() => {
                  clearTemporaryCache();
                }, 2000);
                
              }, 1500); // ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
              
            }, 500);
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î
            status.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î: ${careerName}...`;
            status.style.background = 'rgba(255,255,0,0.7)';
            status.style.display = 'block';
            scanFrame.style.display = 'none';
            
          } catch (error) {
            console.error('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏∑‡πà‡∏≠:', error);
            status.textContent = `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î ${careerName} ‡πÑ‡∏î‡πâ`;
            status.style.background = 'rgba(255,0,0,0.7)';
          }
        }, 200); // ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
      }

      // ‡πÄ‡∏õ‡∏¥‡∏î AR ‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å - ‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô
      const startAR = () => {
        console.log('üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö AR...');
        
        // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ
        unlockBtn.style.display = 'none'; 
        
        // ‡πÅ‡∏™‡∏î‡∏á loading ‡∏Ç‡∏ì‡∏∞‡∏£‡∏≠‡∏Å‡∏•‡πâ‡∏≠‡∏á
        status.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á...';
        status.style.background = 'rgba(255,165,0,0.7)';
        status.style.display = 'block';
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏° AR scene
        arScene.style.visibility = 'visible';
        
        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ AR.js ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÅ‡∏™‡∏î‡∏á UI
        setTimeout(() => {
          scanFrame.style.display = 'block';
          careerBtn.style.display = 'block';
          status.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Hiro Marker...';
          status.style.background = 'rgba(0,0,0,0.7)';
          
          // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
          voice.volume = 0;
          voice.play().then(() => {
            voice.pause();
            voice.currentTime = 0;
            voice.volume = 1; // ‡∏Ñ‡∏∑‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏Å‡∏ï‡∏¥
            console.log('üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
          }).catch(e => console.warn('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ:', e));
          
        }, 2000); // ‡∏£‡∏≠‡πÉ‡∏´‡πâ AR.js ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        
        document.body.removeEventListener('click', startAR);
      };
      document.body.addEventListener('click', startAR);

      // ‡∏û‡∏ö marker - ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ sticky
      marker.addEventListener('markerFound', () => {
        status.textContent = '‡∏û‡∏ö Hiro Marker!';
        status.style.background = 'rgba(0,255,0,0.7)';
        scanFrame.style.display = 'none';
        markerFound = true;
        
        // ‡∏ã‡πà‡∏≠‡∏ô career container ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á marker container
        careerContainer.setAttribute('visible', 'false');
        markerContainer.setAttribute('visible', 'true');
        
        // ‡πÄ‡∏•‡πà‡∏ô voice.mp3 ‡∏´‡∏•‡∏±‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
        setTimeout(() => {
          voice.currentTime = 0; 
          voice.play().catch(e => console.warn('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ:', e)); 
          console.log('üéµ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á voice.mp3 ‡∏´‡∏•‡∏±‡∏á‡∏™‡πÅ‡∏Å‡∏ô marker');
        }, 500);
      });

      // ‡∏´‡∏≤‡∏¢ marker - ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà (sticky display)
      marker.addEventListener('markerLost', () => {
        if (!markerFound) {
          status.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Hiro Marker...';
          status.style.background = 'rgba(0,0,0,0.7)';
          scanFrame.style.display = 'block';
        } else {
          status.textContent = '‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô marker)';
          status.style.background = 'rgba(0,150,255,0.7)';
          scanFrame.style.display = 'none';
          // ‡πÉ‡∏´‡πâ marker container ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà - ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ sticky display
          markerContainer.setAttribute('visible', 'true');
        }
      });

      // ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏Ñ‡∏•‡∏¥‡∏Å
      careerBtn.addEventListener('click', () => {
        menu.style.display = 'block';
      });
      
      // ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π
      closeBtn.addEventListener('click', () => {
        menu.style.display = 'none';
      });
      
      // ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô - ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏à‡∏£‡∏¥‡∏á
      menu.querySelectorAll('button[data-career]').forEach(btn => {
        btn.addEventListener('click', () => {
          const careerName = btn.getAttribute('data-career');
          console.log('üñ±Ô∏è ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:', careerName);
          
          // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
          changeCareer(careerName);
          menu.style.display = 'none';
        });
      });
    };
  </script>
</body>
</html>